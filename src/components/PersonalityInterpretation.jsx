import React from 'react';
import { motion } from 'framer-motion';
import { planetColors, planetSymbols } from './NatalChart';

const interpretations = {
  Солнце: {
    "Овен": "Сильная, независимая личность. Стремление к лидерству и самовыражению. Энергичность и энтузиазм в достижении целей.",
    "Телец": "Надёжность и практичность. Сильное стремление к материальной стабильности. Упорство в достижении целей.",
    "Близнецы": "Живой, любознательный ум. Разносторонность интересов. Коммуникабельность и адаптивность.",
    "Рак": "Эмоциональная глубина. Забота о близких. Интуитивное понимание других людей.",
    "Лев": "Яркая, творческая натура. Природные лидерские качества. Щедрость и великодушие.",
    "Дева": "Аналитический склад ума. Практичность и внимание к деталям. Стремление к совершенству.",
    "Весы": "Дипломатичность и чувство справедливости. Стремление к гармонии. Эстетическое восприятие мира.",
    "Скорпион": "Глубина чувств и сильная воля. Проницательность. Способность к трансформации.",
    "Стрелец": "Оптимизм и жажда приключений. Философский склад ума. Стремление к расширению горизонтов.",
    "Козерог": "Целеустремлённость и амбициозность. Практичность и ответственность. Организаторские способности.",
    "Водолей": "Оригинальность мышления. Гуманистические идеалы. Стремление к свободе и независимости.",
    "Рыбы": "Чувствительность и интуиция. Творческое воображение. Способность к сопереживанию."
  },
  Луна: {
    "Овен": "Эмоциональная импульсивность. Потребность в активности и новизне. Прямота в выражении чувств.",
    "Телец": "Эмоциональная стабильность. Потребность в комфорте и безопасности. Чувственность.",
    "Близнецы": "Эмоциональная подвижность. Потребность в общении и разнообразии. Любознательность.",
    "Рак": "Глубокая эмоциональность. Сильная связь с семьёй. Развитая интуиция.",
    "Лев": "Эмоциональная теплота. Потребность в признании. Артистизм в выражении чувств.",
    "Дева": "Эмоциональная сдержанность. Потребность в порядке. Забота о здоровье.",
    "Весы": "Эмоциональная гармония. Потребность в партнёрстве. Дипломатичность.",
    "Скорпион": "Интенсивность эмоций. Психологическая проницательность. Потребность в глубоких отношениях.",
    "Стрелец": "Эмоциональный оптимизм. Потребность в свободе. Философский взгляд на жизнь.",
    "Козерог": "Эмоциональная сдержанность. Потребность в достижениях. Внутренняя дисциплина.",
    "Водолей": "Эмоциональная независимость. Потребность в дружбе. Оригинальность.",
    "Рыбы": "Эмоциональная чувствительность. Развитое воображение. Духовные потребности."
  },
  Меркурий: {
    "Овен": "Быстрый, живой ум. Спонтанные решения и прямолинейность в общении. Склонность к новаторским идеям и интеллектуальной инициативе.",
    "Телец": "Методичное, практическое мышление. Хорошая память на факты и цифры. Способность к длительной концентрации внимания.",
    "Близнецы": "Блестящие коммуникативные способности. Разносторонние интересы и быстрое усвоение информации. Природная любознательность.",
    "Рак": "Интуитивное мышление и хорошая память. Способность понимать эмоциональный подтекст. Творческое воображение в общении.",
    "Лев": "Яркий, артистичный стиль общения. Способность убеждать и вдохновлять других. Природный дар оратора.",
    "Дева": "Аналитический склад ума. Внимание к деталям и точность в выражениях. Способность к систематизации информации.",
    "Весы": "Дипломатичность в общении. Способность видеть разные точки зрения. Стремление к справедливым решениям.",
    "Скорпион": "Проницательный ум и способность к глубокому анализу. Интерес к тайнам и скрытым механизмам. Сильная интуиция.",
    "Стрелец": "Философский склад ума. Способность видеть широкую перспективу. Оптимистичный подход к обучению.",
    "Козерог": "Структурированное мышление. Практический подход к информации. Способность к долгосрочному планированию.",
    "Водолей": "Оригинальное, нестандартное мышление. Интерес к новым технологиям и научным открытиям. Способность генерировать уникальные идеи.",
    "Рыбы": "Образное мышление и богатое воображение. Интуитивное понимание информации. Способность к художественному восприятию."
  },
  Венера: {
    "Овен": "Страстная натура в любви. Прямота в выражении чувств. Спонтанность в отношениях и творческих проявлениях.",
    "Телец": "Сильная чувственность и практичность в любви. Ценит комфорт и материальную стабильность. Художественный вкус и любовь к прекрасному.",
    "Близнецы": "Легкость и разнообразие в отношениях. Интеллектуальная совместимость важнее физической. Артистичность и коммуникабельность.",
    "Рак": "Глубокая эмоциональная привязанность. Забота и нежность в отношениях. Ценит семейные традиции и домашний уют.",
    "Лев": "Романтичная, театральная натура в любви. Щедрость в проявлении чувств. Стремление к роскоши и красоте.",
    "Дева": "Практичный подход к любви. Внимание к деталям в отношениях. Стремление к совершенству в творчестве.",
    "Весы": "Утонченность и дипломатичность в любви. Стремление к гармонии в отношениях. Развитое чувство прекрасного.",
    "Скорпион": "Глубина и интенсивность чувств. Магнетическая привлекательность. Способность к глубокой трансформации через любовь.",
    "Стрелец": "Свободолюбие в отношениях. Оптимистичный взгляд на любовь. Интерес к разным культурам и стилям.",
    "Козерог": "Серьезный подход к отношениям. Верность и надежность в любви. Практичный подход к искусству.",
    "Водолей": "Необычный подход к любви и искусству. Ценит дружбу в отношениях. Оригинальность в творческом самовыражении.",
    "Рыбы": "Романтичность и идеализм в любви. Творческое вдохновение. Способность к самопожертвованию в отношениях."
  },
  Марс: {
    "Овен": "Мощная энергетика и инициативность. Смелость в действиях. Способность быстро достигать целей через прямое действие.",
    "Телец": "Упорство и выносливость в действиях. Практический подход к достижению целей. Способность к длительным усилиям.",
    "Близнецы": "Быстрота и разнообразие действий. Интеллектуальный подход к достижению целей. Умение вести несколько дел одновременно.",
    "Рак": "Действия, основанные на интуиции. Эмоциональная мотивация. Защита близких как главный стимул.",
    "Лев": "Драматический стиль действий. Творческая энергия и лидерские качества. Стремление к признанию через достижения.",
    "Дева": "Методичность и точность в действиях. Внимание к деталям в работе. Стремление к совершенству в практических делах.",
    "Весы": "Дипломатичный подход к действиям. Стремление к справедливости в поступках. Умение находить баланс в конфликтах.",
    "Скорпион": "Мощная трансформирующая энергия. Стратегический подход к целям. Способность преодолевать серьезные препятствия.",
    "Стрелец": "Энтузиазм и оптимизм в действиях. Стремление к расширению горизонтов. Философский подход к достижению целей.",
    "Козерог": "Целеустремленность и дисциплина в действиях. Амбициозность в достижении целей. Способность к длительной концентрации усилий.",
    "Водолей": "Нестандартный подход к действиям. Способность к революционным изменениям. Действия на благо коллектива.",
    "Рыбы": "Интуитивные действия. Способность к адаптации. Вдохновение как главный двигатель активности."
  },
  Юпитер: {
    "Овен": "Смелость в расширении возможностей. Оптимистичный подход к новым начинаниям. Вдохновляющее лидерство.",
    "Телец": "Способность привлекать материальные блага. Мудрое управление ресурсами. Талант в финансовых вопросах.",
    "Близнецы": "Широкий интеллектуальный кругозор. Успех в образовании и коммуникации. Способность делиться знаниями.",
    "Рак": "Эмоциональная мудрость. Успех через заботу о других. Развитая интуиция в социальных вопросах.",
    "Лев": "Природное великодушие. Успех в творческой самореализации. Способность вдохновлять других.",
    "Дева": "Мудрость в практических делах. Успех через служение другим. Способность улучшать существующие системы.",
    "Весы": "Социальная гармония и справедливость. Успех в партнерстве. Способность к мудрому посредничеству.",
    "Скорпион": "Глубокое понимание жизненных процессов. Способность к трансформации через кризисы. Мощная регенерирующая сила.",
    "Стрелец": "Природный оптимизм и удача. Успех в путешествиях и образовании. Философская мудрость.",
    "Козерог": "Мудрость в достижении целей. Социальный успех через упорный труд. Организаторские способности.",
    "Водолей": "Прогрессивное мышление. Успех через инновации. Способность видеть будущие тенденции.",
    "Рыбы": "Духовная мудрость. Успех через интуицию и сострадание. Способность к духовному росту."
  },
  Сатурн: {
    "Овен": "Уроки самостоятельности и сдержанности. Необходимость учиться контролировать импульсивность. Развитие дисциплины в достижении целей.",
    "Телец": "Уроки материальной ответственности. Развитие практичности и терпения. Способность к долгосрочному планированию ресурсов.",
    "Близнецы": "Уроки в сфере коммуникации. Развитие структурированного мышления. Ответственный подход к обучению и информации.",
    "Рак": "Уроки эмоциональной зрелости. Развитие внутренней стабильности. Ответственность за семью и близких.",
    "Лев": "Уроки творческой дисциплины. Развитие ответственного лидерства. Способность к организованному самовыражению.",
    "Дева": "Уроки совершенствования и порядка. Развитие профессионального мастерства. Ответственный подход к здоровью и работе.",
    "Весы": "Уроки в партнерских отношениях. Развитие чувства справедливости. Ответственность в социальных взаимодействиях.",
    "Скорпион": "Уроки трансформации и контроля. Развитие внутренней силы. Ответственность за использование власти.",
    "Стрелец": "Уроки мудрости и ограничений. Развитие философского понимания. Ответственность за убеждения и верования.",
    "Козерог": "Природная способность к организации и структуре. Развитие амбиций и целеустремленности. Талант в управлении.",
    "Водолей": "Уроки социальной ответственности. Развитие дисциплины в инновациях. Структурированный подход к реформам.",
    "Рыбы": "Уроки духовной дисциплины. Развитие практической интуиции. Ответственность за идеалы и мечты."
  }
}; 

const aspectInterpretations = {
  "соединение": {
    "Солнце-Луна": "Сильная гармония между сознательным и подсознательным. Цельность личности. Природная способность к самовыражению через эмоции.",
    "Солнце-Меркурий": "Ясность мышления и самовыражения. Интеллектуальная уверенность. Талант к публичным выступлениям и коммуникации.",
    "Солнце-Венера": "Природное обаяние и артистизм. Способность привлекать любовь и красоту. Гармоничное самовыражение в искусстве.",
    "Солнце-Марс": "Мощная жизненная энергия. Природные лидерские качества. Способность к решительным действиям и самоутверждению.",
    "Солнце-Юпитер": "Оптимизм и жизнелюбие. Способность к расширению возможностей. Природная удача и великодушие.",
    "Солнце-Сатурн": "Серьезное отношение к жизни. Способность к самодисциплине. Ответственное лидерство.",
    "Луна-Меркурий": "Интуитивное мышление. Эмоциональный интеллект. Способность понимать и выражать чувства словами.",
    "Луна-Венера": "Глубокая эмоциональная чувствительность. Художественное восприятие. Природная способность к эмпатии.",
    "Луна-Марс": "Эмоциональная страстность. Сильные инстинкты. Способность действовать на основе интуиции.",
    "Луна-Юпитер": "Эмоциональная щедрость. Оптимистичное мировосприятие. Природная способность к заботе о других.",
    "Луна-Сатурн": "Эмоциональная глубина и сдержанность. Внутренняя мудрость. Способность к длительным эмоциональным обязательствам.",
    "Меркурий-Венера": "Художественное мышление. Дар красноречия и дипломатии. Способность выражать красоту через слова.",
    "Меркурий-Марс": "Острый ум и быстрота реакции. Способность к дебатам и аргументации. Интеллектуальная смелость.",
    "Меркурий-Юпитер": "Широта мышления. Способность к философскому познанию. Талант к обучению и преподаванию.",
    "Меркурий-Сатурн": "Глубина и структурированность мышления. Способность к концентрации. Серьезный подход к обучению.",
    "Венера-Марс": "Сильная творческая энергия. Страстность в отношениях. Способность к активному проявлению любви.",
    "Венера-Юпитер": "Социальное обаяние и удача в любви. Способность привлекать благоприятные возможности. Щедрость в отношениях.",
    "Венера-Сатурн": "Верность и надежность в любви. Способность к длительным обязательствам. Серьезное отношение к искусству.",
    "Марс-Юпитер": "Энергия и оптимизм в действиях. Способность к масштабным достижениям. Смелость в расширении границ.",
    "Марс-Сатурн": "Дисциплинированная энергия. Способность к упорному труду. Целеустремленность в действиях.",
    "Юпитер-Сатурн": "Баланс между оптимизмом и реализмом. Мудрое использование возможностей. Практический успех."
  },
  "трин": {
    "Солнце-Луна": "Естественный поток между волей и эмоциями. Гармоничное самовыражение. Внутренняя целостность.",
    "Солнце-Меркурий": "Легкость в самовыражении. Природная коммуникабельность. Творческое мышление.",
    "Солнце-Венера": "Природная грация и творческий потенциал. Легкость в любви и отношениях. Художественные таланты.",
    "Солнце-Марс": "Конструктивная энергия и энтузиазм. Легкость в достижении целей. Природные лидерские качества.",
    "Солнце-Юпитер": "Оптимизм и удача. Способность видеть возможности. Естественный рост и развитие.",
    "Солнце-Сатурн": "Конструктивная самодисциплина. Зрелое самовыражение. Способность к организации жизни.",
    "Луна-Венера": "Эмоциональная гармония. Художественная чувствительность. Природная грация в выражении чувств.",
    "Луна-Марс": "Конструктивное использование эмоциональной энергии. Интуитивные действия. Эмоциональная смелость.",
    "Луна-Юпитер": "Эмоциональный оптимизм. Природная мудрость. Способность к эмоциональному росту.",
    "Луна-Сатурн": "Эмоциональная стабильность. Внутренняя дисциплина. Мудрость в чувствах.",
    "Меркурий-Венера": "Гармония мысли и чувства. Художественное восприятие. Дипломатичность в общении.",
    "Меркурий-Марс": "Конструктивное мышление. Интеллектуальная энергия. Эффективная коммуникация.",
    "Меркурий-Юпитер": "Широкий кругозор. Способность к обучению и преподаванию. Оптимистичное мышление.",
    "Меркурий-Сатурн": "Глубина мышления. Способность к концентрации. Практический интеллект.",
    "Венера-Марс": "Гармония в любви и действии. Творческая энергия. Успех в отношениях.",
    "Венера-Юпитер": "Социальное обаяние и удача в любви. Способность привлекать благоприятные возможности.",
    "Венера-Сатурн": "Стабильность в отношениях. Верность принципам. Зрелость в любви.",
    "Марс-Юпитер": "Успешные действия. Конструктивная энергия. Способность к достижению больших целей.",
    "Марс-Сатурн": "Дисциплинированная энергия. Практические достижения. Терпение в действиях.",
    "Юпитер-Сатурн": "Баланс роста и стабильности. Практическая мудрость. Долгосрочный успех."
  },
  "квадрат": {
    "Солнце-Луна": "Внутренний конфликт между волей и чувствами. Необходимость интеграции противоположностей.",
    "Солнце-Меркурий": "Трудности в самовыражении. Конфликт между мышлением и самоидентификацией.",
    "Солнце-Венера": "Напряжение между самовыражением и отношениями. Сложности в творческой реализации.",
    "Солнце-Марс": "Конфликт между волей и действием. Необходимость учиться контролировать энергию.",
    "Солнце-Юпитер": "Склонность к преувеличениям. Конфликт между эго и возможностями.",
    "Солнце-Сатурн": "Внутренние ограничения. Необходимость преодоления препятствий. Уроки самодисциплины.",
    "Луна-Меркурий": "Конфликт между чувствами и разумом. Трудности в выражении эмоций.",
    "Луна-Венера": "Эмоциональная неуверенность в отношениях. Конфликт между потребностями и желаниями.",
    "Луна-Марс": "Эмоциональная импульсивность. Конфликт между чувствами и действиями.",
    "Луна-Юпитер": "Эмоциональные излишества. Необходимость учиться эмоциональной умеренности.",
    "Луна-Сатурн": "Эмоциональные блоки. Сложности в выражении чувств. Уроки эмоциональной зрелости.",
    "Меркурий-Венера": "Конфликт между логикой и чувствами. Трудности в выражении эмоций словами.",
    "Меркурий-Марс": "Ментальное напряжение. Склонность к спорам. Необходимость учиться терпению в общении.",
    "Меркурий-Юпитер": "Склонность к преувеличениям в мышлении. Необходимость развивать практичность.",
    "Меркурий-Сатурн": "Ментальные блоки. Трудности в обучении. Необходимость структурировать мышление.",
    "Венера-Марс": "Напряжение между желаниями и действиями. Сложности в любовных отношениях.",
    "Венера-Юпитер": "Склонность к излишествам в удовольствиях. Необходимость учиться умеренности.",
    "Венера-Сатурн": "Трудности в выражении чувств. Страх близости. Уроки в отношениях.",
    "Марс-Юпитер": "Склонность к рискованным действиям. Необходимость учиться умеренности в действиях.",
    "Марс-Сатурн": "Фрустрация в действиях. Необходимость учиться терпению. Уроки дисциплины.",
    "Юпитер-Сатурн": "Конфликт между оптимизмом и реализмом. Необходимость найти баланс роста."
  },
  "оппозиция": {
    "Солнце-Луна": "Внутренний конфликт между сознательным и подсознательным. Необходимость интеграции противоположностей.",
    "Солнце-Меркурий": "Противоречие между самовыражением и коммуникацией. Поиск баланса в самовыражении.",
    "Солнце-Венера": "Противоречие между самоутверждением и отношениями. Поиск баланса в любви.",
    "Солнце-Марс": "Противоречие между волей и действием. Поиск баланса в самореализации.",
    "Солнце-Юпитер": "Противоречие между личными и социальными целями. Поиск баланса в развитии.",
    "Солнце-Сатурн": "Борьба между самовыражением и ограничениями. Поиск баланса ответственности.",
    "Луна-Меркурий": "Противоречие между чувствами и логикой. Поиск баланса в восприятии.",
    "Луна-Венера": "Противоречие между эмоциональными потребностями и желаниями. Поиск баланса в отношениях.",
    "Луна-Марс": "Противоречие между чувствами и действиями. Поиск эмоционального баланса.",
    "Луна-Юпитер": "Противоречие между внутренним и внешним ростом. Поиск эмоциональной мудрости.",
    "Луна-Сатурн": "Противоречие между эмоциями и долгом. Поиск эмоциональной зрелости.",
    "Меркурий-Венера": "Противоречие между логикой и чувствами. Поиск баланса в общении.",
    "Меркурий-Марс": "Противоречие между мыслью и действием. Поиск баланса в решениях.",
    "Меркурий-Юпитер": "Борьба между деталями и общей картиной. Поиск баланса в познании.",
    "Меркурий-Сатурн": "Противоречие между гибкостью и структурой мышления. Поиск ментального баланса.",
    "Венера-Марс": "Напряжение в отношениях. Сильное притяжение противоположностей. Поиск баланса в любви.",
    "Венера-Юпитер": "Противоречие между личными и социальными ценностями. Поиск баланса в отношениях.",
    "Венера-Сатурн": "Противоречие между желаниями и долгом. Поиск баланса в любви и ответственности.",
    "Марс-Юпитер": "Противоречие между личными действиями и социальными целями. Поиск баланса в достижениях.",
    "Марс-Сатурн": "Противоречие между действием и ограничением. Поиск баланса в реализации целей.",
    "Юпитер-Сатурн": "Противоречие между расширением и ограничением. Поиск баланса в развитии."
  }
};

function getZodiacSign(degree) {
  const signs = [
    "Овен", "Телец", "Близнецы", "Рак", "Лев", "Дева",
    "Весы", "Скорпион", "Стрелец", "Козерог", "Водолей", "Рыбы"
  ];
  const signIndex = Math.floor(degree / 30);
  return signs[signIndex];
}

export default function PersonalityInterpretation({ data }) {
  if (!data || !data.planets) return null;

  return (
    <motion.div 
      className="max-w-4xl mx-auto mt-12 space-y-8"
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.5 }}
    >
      <h2 className="text-2xl font-bold text-indigo-900 text-center mb-8">
        Интерпретация натальной карты
      </h2>

      {/* Основные планеты */}
      <div className="grid gap-6 md:grid-cols-2">
        {Object.entries(data.planets).map(([planet, position]) => {
          const sign = getZodiacSign(position.longitude);
          const interpretation = interpretations[planet]?.[sign];
          
          return (
            <motion.div
              key={planet}
              className="bg-white/50 backdrop-blur-sm rounded-xl p-6 shadow-md border border-indigo-50"
              initial={{ opacity: 0, x: -20 }}
              animate={{ opacity: 1, x: 0 }}
              whileHover={{ scale: 1.02 }}
              transition={{ duration: 0.2 }}
            >
              <div className="flex items-center gap-3 mb-4">
                <div 
                  className="w-10 h-10 rounded-full flex items-center justify-center border-2"
                  style={{ borderColor: planetColors[planet] }}
                >
                  <span 
                    className="text-xl"
                    style={{ color: planetColors[planet] }}
                  >
                    {planetSymbols[planet]}
                  </span>
                </div>
                <div>
                  <h3 className="text-lg font-semibold text-indigo-900">{planet}</h3>
                  <p className="text-indigo-600/70">{sign} {Math.round(position.longitude)}°</p>
                </div>
              </div>
              {interpretation && (
                <p className="text-indigo-900/80 leading-relaxed">
                  {interpretation}
                </p>
              )}
            </motion.div>
          );
        })}
      </div>

      {/* Аспекты */}
      {data.aspects && data.aspects.length > 0 && (
        <div className="mt-12">
          <h3 className="text-xl font-bold text-indigo-900 mb-6 text-center">
            Взаимодействие планет
          </h3>
          <div className="grid gap-6 md:grid-cols-2">
            {data.aspects.map((aspect, index) => {
              const aspectKey = `${aspect.planet1}-${aspect.planet2}`;
              const interpretation = aspectInterpretations[aspect.aspect]?.[aspectKey];
              
              return (
                <motion.div
                  key={index}
                  className="bg-white/50 backdrop-blur-sm rounded-xl p-6 shadow-md border border-indigo-50"
                  initial={{ opacity: 0, x: -20 }}
                  animate={{ opacity: 1, x: 0 }}
                  whileHover={{ scale: 1.02 }}
                  transition={{ duration: 0.2 }}
                >
                  <div className="flex items-center gap-4 mb-4">
                    <div className="flex items-center gap-2">
                      <span 
                        className="w-8 h-8 rounded-full flex items-center justify-center border-2"
                        style={{ borderColor: planetColors[aspect.planet1] }}
                      >
                        {planetSymbols[aspect.planet1]}
                      </span>
                      <span className="text-indigo-600/70">●</span>
                      <span 
                        className="w-8 h-8 rounded-full flex items-center justify-center border-2"
                        style={{ borderColor: planetColors[aspect.planet2] }}
                      >
                        {planetSymbols[aspect.planet2]}
                      </span>
                    </div>
                    <span className="text-indigo-900 font-medium">{aspect.aspect}</span>
                  </div>
                  {interpretation && (
                    <p className="text-indigo-900/80 leading-relaxed">
                      {interpretation}
                    </p>
                  )}
                </motion.div>
              );
            })}
          </div>
        </div>
      )}
    </motion.div>
  );
} 